{
  "enabled": true,
  "forkProcessing": "enabled",
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:base"
  ],
  "timezone": "America/New_York",
  "repositories": ["defenseunicorns/uds-package-dubbd"],
  "rebaseStalePrs": true,
  "schedule": ["after 12pm and before 11am every weekday"],
  "dependencyDashboard": true,
  "platform": "github",
  "onboarding": false,
  "requireConfig": false,
  "dependencyDashboardTitle": "Renovate Dashboard ðŸ¤–",
  "rebaseWhen": "conflicted",
  "commitBodyTable": true,
  "ignorePaths": ["archive/**"],
  "suppressNotifications": ["prIgnoreNotification"],
  "helm-values": {
    "fileMatch": ["./.+\\.yaml$"]
  },
  "kubernetes": {
    "fileMatch": ["\\.yaml$"],
    "ignorePaths": [
      "ansible",
      "scripts",
      ".github"
    ]
  },
  "hostRules": [
    {
      "matchHost": "registry1.dso.mil",
      "hostType": "docker",
      "username": "mxnxpx",
      "encrypted": {
        "password": "wcBMA8xOaBJvzJNbAQf+KBUY9fIbptON7SXJVwcte1FK86gQaAEpR2ucSCfjKsQWmXTcQWhGn/fYNdDjhcYeDcCOwHKhUClrAf4uZnFRY83Zt2/ez1r1mCfgHPQNe6kVI2ax9m1ZODMRV1aFU7n84fubs7BaAs9wpSGo3bgciefhZgEKvai9NxWn+dUKuWZqj7UFRg+Qh83fovHy2ALd4N6LqNPPRx7rpVQUTiQW/ElUKIyYUbI6/p9Kp5+jMx52/oLzzqyWJHuWO6OsIYmvvexexbx3l2T/YNwhBNmfILSLL+oEZAs0AVVckt8EtYip+CrzaXFXR8PIZWQeV1lPenHVLBK70umcdHVtlQhImNJtAYyEgHXAverrSWFmCbBS7vsHMTsaV5YYOjK/DJSt9D0sJD8VcXzVRqiF3wCH459Yvb1ptsr9+xMdUhA5rHW9x1F6K3HsB6jEgobUW5ug3w2XjWd6uZ1ZQKdRQoEYwGX3UeFz0f9KTODgEAme9w"
      }
    }
  ],
  "regexManagers": [
    {
      "fileMatch": ["./.+\\.ya?ml$"],
      "matchStrings": [
        "# renovate: datasource=docker( versioning=(?<versioning>.*?))?\n\\s*-\\s+(?<depName>[^:]+):(?<currentValue>.*)"
      ],
      "datasourceTemplate": "docker"
    },
    {
      "fileMatch": ["./.+\\.yaml$"],
      "matchStrings": [
        "registryUrl=(?<registryUrl>.*?)\n *chart: (?<depName>.*?)\n *version: (?<currentValue>.*)\n",
        "# renovate: datasource=helm\n .*- name: (?<depName>.*?)\n *url: (?<registryUrl>.*?)\n *version: (?<currentValue>.*)\n"
      ],
      "datasourceTemplate": "helm"
    },
    {
      "fileMatch": ["./.+\\.ya?ml$"],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>.*?) depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?( registryUrl=(?<registryUrl>.*?))?\\s.*?_version:\\s*['\"](?<currentValue>.*)['\"]\\s"
      ],
      "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}",
      "datasourceTemplate": "gitlab-tags"
    },
    {
      "fileMatch": ["./.+\\.ya?ml$"],
      "matchStrings": [
        "# renovate: datasource=github-tags depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?\\s.*?version:\\s*(?<currentValue>.*)\\s"
      ],
      "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}",
      "datasourceTemplate": "github-tags"
    }
  ],
  "packageRules": [
    {
      "datasources": ["gitlab-tags"],
      "commitMessageTopic": "Gitlab tag {{depName}}",
      "separateMinorPatch": true
    },
    {
      "datasources": ["helm"],
      "commitMessageTopic": "Helm chart {{depName}}",
      "separateMinorPatch": true
    },
    {
      "datasources": ["docker"],
      "commitMessageTopic": "Docker image {{depName}}",
      "commitMessageExtra": "to {{#if isSingleVersion}}v{{{toVersion}}}{{else}}{{{newValue}}}{{/if}}",
      "enabled": true,
      "separateMinorPatch": true
    },
    {
      "datasources": ["gitlab-tags"],
      "updateTypes": ["major"],
      "labels": ["renovate/gitlab-tags", "dependency/major"]
    },
    {
      "datasources": ["gitlab-tags"],
      "updateTypes": ["minor"],
      "labels": ["renovate/gitlab-tags", "dependency/minor"]
    },
    {
      "datasources": ["gitlab-tags"],
      "updateTypes": ["patch"],
      "labels": ["renovate/gitlab-tags", "dependency/patch"]
    },
    {
      "datasources": ["docker"],
      "updateTypes": ["major"],
      "labels": ["renovate/image-release", "dependency/major"]
    },
    {
      "datasources": ["docker"],
      "updateTypes": ["minor"],
      "labels": ["renovate/image-release", "dependency/minor"]
    },
    {
      "datasources": ["docker"],
      "updateTypes": ["patch"],
      "labels": ["renovate/image-release", "dependency/patch"]
    },
    {
      "datasources": ["helm"],
      "updateTypes": ["major"],
      "labels": ["renovate/helm-release", "dependency/major"]
    },
    {
      "datasources": ["helm"],
      "updateTypes": ["minor"],
      "labels": ["renovate/helm-release", "dependency/minor"]
    },
    {
      "datasources": ["helm"],
      "updateTypes": ["patch"],
      "labels": ["renovate/helm-release", "dependency/patch"]
    }
  ]
}
