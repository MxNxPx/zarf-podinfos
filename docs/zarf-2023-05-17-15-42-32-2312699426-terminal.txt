# export colors=("#ffffff" "#000000" "#9c9c9c"); while :; do for i in "${colors[@]}"; do echo; echo; date; echo "COLOR: ${i}"; zarf package deploy zarf-package-podinfos-amd64-0.0.1.tar.zst --confirm --set podinfo_too_color=${i}; sleep 5; deployed_color=$(kubectl get deploy -n podinfo-too podinfo-too -ojsonpath='{.spec.template.spec.containers[0].env[0]}' | jq -r .value); test "$i" = "$deployed_color" && echo "all good" || break 2; done; done


Wed May 17 03:42:32 PM EDT 2023
COLOR: #ffffff

Using config file /home/palassis/GITHUB/MxNxPx/zarf-podinfos/zarf-config.yaml

Saving log file to /tmp/zarf-2023-05-17-15-42-32-2312699426.log

  ✔  All of the checksums matched!                                                                                                                                                                                                                                                                                     
  ✔  Loading Zarf Package zarf-package-podinfos-amd64-0.0.1.tar.zst                                                                                                                                                                                                                                                    

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

kind: ZarfPackageConfig
metadata:
  name: podinfos
  description: Podinfos
  version: 0.0.1
  url: https://github.com/stefanprodan/podinfo
  image: https://raw.githubusercontent.com/stefanprodan/podinfo/gh-pages/screens/podinfo-ui-v3.png
  architecture: amd64
  aggregateChecksum: 8035f27a36029d45cde03064999fa628c013608caf5b6a595e1cdc3766cd43de
build:
  terminal: palassis-razer
  user: palassis
  architecture: amd64
  timestamp: Wed, 17 May 2023 14:49:24 -0400
  version: v0.26.3
  migrations:
  - scripts-to-actions
  - pluralize-set-variable
  differential: false
  registryOverrides: {}
components:
- name: k8s-manifests
  required: true
  manifests:
  - name: podinfo-k8s-manifests
    files:
    - k8s-manifests/podinfo-k8s-manifests.yaml
- name: podinfo-chart
  required: true
  charts:
  - name: podinfo
    releaseName: podinfo
    url: oci://ghcr.io/stefanprodan/charts/podinfo
    version: 6.3.6
    namespace: podinfo
    valuesFiles:
    - values/podinfo-values.yaml
  images:
  - ghcr.io/stefanprodan/podinfo:6.3.6
- name: podinfo-too-chart
  required: true
  charts:
  - name: podinfo-too
    releaseName: podinfo-too
    url: oci://ghcr.io/stefanprodan/charts/podinfo
    version: 6.3.6
    namespace: podinfo-too
    valuesFiles:
    - values/podinfo-too-values.yaml
  images:
  - ghcr.io/stefanprodan/podinfo:6.3.6
variables:
- name: PODINFO_TOO_COLOR
  default: "#000000"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

This package has 1 artifacts with software bill-of-materials (SBOM) included. You can view them now
in the zarf-sbom folder in this directory or to go directly to one, open this in your browser:
/home/palassis/GITHUB/MxNxPx/zarf-podinfos/zarf-sbom/sbom-viewer-ghcr.io_stefanprodan_podinfo_6.3.6.html

* This directory will be removed after package deployment.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ✔  Deploy Zarf package confirmed

                                                                                       
  📦 K8S-MANIFESTS COMPONENT                                                           
                                                                                       

  ✔  Waiting for cluster connection (30s timeout)                                                                                                                                                                                                                                                                      
  ✔  Loading the Zarf State from the Kubernetes cluster                                                                                                                                                                                                                                                                
  ✔  Starting helm chart generation podinfo-k8s-manifests                                                                                                                                                                                                                                                              
  ✔  Processing helm chart raw-podinfos-k8s-manifests-podinfo-k8s-manifests:0.1.1684352552 from Zarf-generated helm chart                                                                                                                                                                                              

                                                                                       
  📦 PODINFO-CHART COMPONENT                                                           
                                                                                       

  ✔  Pushed 1 images to the zarf registry                                                                                                                                                                                                                                                                              
  ✔  Processing helm chart podinfo:6.3.6 from oci://ghcr.io/stefanprodan/charts/podinfo                                                                                                                                                                                                                                

                                                                                       
  📦 PODINFO-TOO-CHART COMPONENT                                                       
                                                                                       

  ✔  Pushed 1 images to the zarf registry                                                                                                                                                                                                                                                                              
  ✔  Processing helm chart podinfo-too:6.3.6 from oci://ghcr.io/stefanprodan/charts/podinfo                                                                                                                                                                                                                            
  ✔  Zarf deployment complete
